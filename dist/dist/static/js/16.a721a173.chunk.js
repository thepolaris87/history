(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{238:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return g}));var r,a,o=t(159),i=t(5),u=t(620),c=t(556),s=t.n(c);function l(e,n,t,r,a,o,i){try{var u=e[o](i),c=u.value}catch(s){return void t(s)}u.done?n(c):Promise.resolve(c).then(r,a)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){l(o,r,a,i,u,"next",e)}function u(e){l(o,r,a,i,u,"throw",e)}i(void 0)}))}}null!==(a=(r=window).MediaRecorder)&&void 0!==a||(r.MediaRecorder=u.a);var f=function(){var e=d(regeneratorRuntime.mark((function e(){var n,t,r,a,o,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t={audio:!0},e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:return r=e.sent,a=new MediaRecorder(r),o=new(window.AudioContext||window.webkitAudioContext),i=new FileReader,(u=new Audio).controls=!0,c=document.createElement("source"),u.appendChild(c),a.addEventListener("dataavailable",(function(e){return n.push(e.data)})),a.addEventListener("stop",d(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===n[n.length-1].size&&n.pop(),t=n[n.length-1],r=URL.createObjectURL(t),c.src=r,u.load(),i.readAsArrayBuffer(t),i.onloadend=function(){var e=i.result;o.decodeAudioData(e,(function(e){var n=p(e),t=n.channels,r=n.sampleRate,a=n.samples,o=v(t,r,a).bUrl,i=document.createElement("a");document.body.appendChild(i),i.innerHTML="fdskfjdslafjdslafjlsdflk",i.href=o,i.download="test"}))};case 8:case"end":return e.stop()}}),e)})))),e.abrupt("return",{mediaRecorder:a,audio:u});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){var n,t,r=e.numberOfChannels,a=e.length*r*2+44,o=new ArrayBuffer(a),i=new DataView(o),u=[],c=0,l=0;for(v(1179011410),v(a-8),v(1163280727),v(544501094),v(16),p(1),p(r),v(e.sampleRate),v(2*e.sampleRate*r),p(2*r),p(16),v(1635017060),v(a-l-4),n=0;n<e.numberOfChannels;n++)u.push(e.getChannelData(n));for(;l<a;){for(n=0;n<r;n++)t=0|(.5+(t=Math.max(-1,Math.min(1,u[n][c])))<0?32768*t:32767*t),i.setInt16(l,t,!0),l+=2;c++}var d=s.a.WavHeader.readHeader(new DataView(o)),f=new Int16Array(o,d.dataOffset,d.dataLen/2);return{channels:d.channels,sampleRate:d.sampleRate,samples:f};function p(e){i.setUint16(l,e,!0),l+=2}function v(e){i.setUint32(l,e,!0),l+=4}},v=function(e,n,t){for(var r=[],a=new s.a.Mp3Encoder(e,n,128),o=t.length,i=0;o>=1152;i+=1152){var u=t.subarray(i,i+1152),c=a.encodeBuffer(u);c.length>0&&r.push(new Int8Array(c)),o-=1152}var l=a.flush();l.length>0&&r.push(new Int8Array(l));var d=new Blob(r,{type:"audio/mp3"});return{mp3Blob:d,bUrl:URL.createObjectURL(d)}},h=f,w=["canvas"];function m(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function y(e,n,t,r,a,o,i){try{var u=e[o](i),c=u.value}catch(s){return void t(s)}u.done?n(c):Promise.resolve(c).then(r,a)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){y(o,r,a,i,u,"next",e)}function u(e){y(o,r,a,i,u,"throw",e)}i(void 0)}))}}function g(e){return R.apply(this,arguments)}function R(){return(R=b(regeneratorRuntime.mark((function e(n){var t,r,a,u,c,s,l,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.canvas,r=void 0===t?i.a.SVG:t,m(n,w),a=r.g(),e.next=4,h();case 4:u=e.sent,c=u.mediaRecorder,s=u.audio,l=a.text(200,400,"\ub179\uc74c \uc2dc\uc791"),d=a.text(400,400,"\uc911\uc9c0"),f=a.text(600,400,"\uc7ac\uc0dd"),p=a.text(700,400,"\ub2e4\uc6b4\ub85c\ub4dc"),"M400, 100 l100, 0",Object(o.a)({canvas:a,fillPath:"M350, 50 l100, 0 l0, 100, l-100, 0 l0, -100z",strokePath:"M400, 100 l100, 0",onComplete:function(){console.log("fsdafas")},strokeWidth:10,strokePathClassName:"s02",dragElScale:.11,oneWay:!0}),l.click((function(){c.start()})),d.click((function(){c.stop()})),f.click((function(){s.play()})),p.click((function(){console.log(s)}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=16.a721a173.chunk.js.map