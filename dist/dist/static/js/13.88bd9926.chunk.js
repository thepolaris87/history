(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{235:function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return m}));var r=e(5),a=e(73),o=e(7),c=e(514),i=e(520),u=e(532),s=e(518),f=e(519),l=["canvas"];function d(t,n,e,r,a,o,c){try{var i=t[o](c),u=i.value}catch(s){return void e(s)}i.done?n(u):Promise.resolve(u).then(r,a)}function v(t){return function(){var n=this,e=arguments;return new Promise((function(r,a){var o=t.apply(n,e);function c(t){d(o,r,a,c,i,"next",t)}function i(t){d(o,r,a,c,i,"throw",t)}c(void 0)}))}}function g(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}function m(t){var n=regeneratorRuntime.mark(Y),e=t.canvas,d=void 0===e?r.a.SVG:e,m=g(t,l),p=d,x=m.callback,b=m.generator,h=m.background,y=m.directive,O=m.questions,w=m.dropArea,j=m.dragItems,k=p.g().addClass("background"),B=p.g().addClass("contents"),C=new i.a(d,{timeout:999}),E=null,R=null,P=0,S=0,I=[],M=null,A=0,L=0,T=null,q=function(){var t=y.textList,n=y.fontSize,e=y.ttsOffset,a=y.position,o=B.g().addClass("directive"),c=Object(u.a)({g:o,text:t[P],x:a.x,y:a.y,fontSize:n,ttsOffet:e});Object(r.b)({g:c.directive,y:a.y})},N=function(){var t=O.position,n=O.offset,e=O.images,r=B.g().addClass("question"),o=[Object(c.g)(0,5),Object(c.g)(1,4)],i=Object(c.j)(o);1===P&&9===i&&(o[0]-=1),2===P&&1===i&&(o[0]=Object(c.g)(1,5)),A=[0,1,-1][P]+Object(c.j)(o),o.forEach(function(){var i=v(regeneratorRuntime.mark((function i(u,s){var f,l,d,v,g;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return f=o[s]&&o[s]-1,l=Object(a.d)({canvas:r,img:{url:e.front[f]}}),d=Object(a.d)({canvas:r,img:{url:e.rear[f]}}),v=l.getBBox(),g=Object(a.b)({canvas:r,front:l,back:d,duration:1e3}).transform("t".concat(t.x+v.w*s+n.x*s," ").concat(t.y+n.y*s)),i.next=7,Object(c.q)();case 7:return i.next=9,g.flip();case 9:case"end":return i.stop()}}),i)})));return function(t,n){return i.apply(this,arguments)}}())},z=function(){var t=w.background,n=w.buttons,e=t.image,r=e.x,o=e.y,c=e.urls,i=e.scale;E=B.g().addClass("drop-area"),Object(a.d)({canvas:E,x:r,y:o,img:{url:c[S],scale:i},center:!0}).addClass("drop-area-bg"),n.forEach((function(t){var n=t.image,e=n.x,r=n.y,o=n.url,c=n.scale;Object(a.d)({canvas:E,x:e,y:r,img:{url:o,scale:c},center:!0}).addClass("drop-area-ok")})),E.select(".drop-area-ok").pointerdown(W)},D=function(){var t=j.background,n=j.images,e=t.image,r=n[S],o=A<5?5:A,i=Object(c.g)(o,9),u=0,f=0;R=B.g().addClass("drag-area"),console.log("itemLen, answerNum: ",i,A);for(var l=Object(a.d)({canvas:R,x:e.x,y:e.y,img:{url:e.urls[S],scale:e.scale},center:!0}).addClass("drag-area-bg").getBBox(),d=R.g().addClass("drag-item-container"),v=function(t){var n=d.g().addClass("drag-item-group"),e=Math.floor(t/5)+1,o=l.x+70*(t%5+1)+u,c=l.y+l.h/3*e+f,i=Object(a.d)({canvas:n,x:o,y:c,img:{url:r[t],scale:.6},center:!0}).attr({pointerEvents:"".concat(t&&"none")}).addClass("drag-item");I.push(Object(s.a)({dragItem:i,startCallback:J,moveCallback:G,endCallback:function(){U(i)}}))},g=0;g<i;g++)v(g)},J=function(){L||T.remove()},G=function(){},U=function(t){var n=t.getBBox(),e=E.getBBox(),r=0,a=0;o.a.path.isBBoxIntersect(n,e)?(L++,t.transform("".concat(t.transform().local," t").concat(e.x-n.cx+n.w*(L%6+1)+r," ").concat(e.y-n.cy+e.h/3*(Math.floor(L/6)+1)+a)),1===L&&I.forEach((function(t){return t.attr({pointerEvents:"auto"})})),t.attr({pointerEvents:"none"})):(t.transform(""),L||V())},V=function(){var t=B.select(".hint")||B.g().addClass("hint"),n=I[0].getBBox(),e=n.cx,r=n.cy,o=E.getBBox(),c=o.cx,i=o.cy;T=Object(a.c)({canvas:t,scale:.8,type:1,XY:[e,r],moveTo:[c,i],pathStr:""}).data("count",0)},W=function(){var t=v(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=A===L)){t.next=6;break}return t.next=4,Object(f.a)({el:E,bool:n,scale:.8});case 4:t.next=8;break;case 6:console.log("incorrect!"),r.a.controller.addUserAction(!1);case 8:M.next().done&&x();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(t){P=Object(c.g)(0,2),S=Object(c.g)(0,2),I=[],A=0,L=0,t&&B.children().forEach((function(t){return t.remove()}))};function Y(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<b.count)){n.next=13;break}return X(t),q(),N(),z(),D(),V(),void(n.next=10);case 10:t++,n.next=1;break;case 13:case"end":return n.stop()}}),n)}M=Y(),function(){var t=h.image,n=t.x,e=t.y,r=t.url,o=t.scale;Object(a.d)({canvas:k,x:n,y:e,img:{url:r,scale:o},center:!0})}(),M.next(),C.init()}},518:function(t,n,e){"use strict";e.d(n,"a",(function(){return u}));var r=e(7),a=e(516),o=e(514);function c(t,n,e,r,a,o,c){try{var i=t[o](c),u=i.value}catch(s){return void e(s)}i.done?n(u):Promise.resolve(u).then(r,a)}function i(t){return function(){var n=this,e=arguments;return new Promise((function(r,a){var o=t.apply(n,e);function i(t){c(o,r,a,i,u,"next",t)}function u(t){c(o,r,a,i,u,"throw",t)}i(void 0)}))}}function u(t){var n=t.dragItem,e=t.draggingItem,c=t.startCallback,u=t.moveCallback,s=t.endCallback;n=n.addClass("cp"),e&&e.attr({opacity:"0",pointerEvents:"none"});var f=n.getBBox(),l=function(t){return t.data("originTransform",t.transform().local)},d=function(t,n,e){var r=t.data("originTransform")||"",a=t.transform().diffMatrix.invert();n=a.x(n,e),e=a.y(n,e),t.transform(r+"t"+[n,e])},v=function(t){return t.data("originTransform",t.transform().local)},g=function(t){n.attr({opacity:Number(t)}),e.attr({opacity:Number(!t)})},m=function(){var t=i(regeneratorRuntime.mark((function t(r){var c,i,u,s,f,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r.pathStr,i=r.easing,u=r.randomDuration,s=n.transform(),f=s.local,n.attr({pointerEvents:"none"}),l=u?Object(o.g)(800,1100):500,!e){t.next=10;break}return a.a.onPath({path:c,duration:l,element:n,local:f,easing:i}),t.next=8,a.a.onPath({path:c,duration:l,element:e,local:f,easing:i});case 8:t.next=12;break;case 10:return t.next=12,a.a.onPath({path:c,duration:l,element:n,local:f,easing:i});case 12:n.attr({pointerEvents:"auto"});case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return n.spectrumEffect=function(t){var e=t.interval,a=void 0===e?100:e,o=t.duration,c=void 0===o?750:o,i=setInterval((function(){var t=n.clone();t.after(n),r.a.animate(1,0,(function(n){return t.attr({opacity:n})}),c,void 0,(function(){return t.remove()}))}),a);return{remove:function(){return clearInterval(i)}}},n.moveAnimate=function(){var t=i(regeneratorRuntime.mark((function t(e,r,a){var o,c,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.getBBox(),c=o.x,i=o.y,u="M"+[c,i]+"L"+[e.x,e.y],t.next=4,m({pathStr:u,easing:r,randomDuration:a});case 4:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}(),n.reset=i(regeneratorRuntime.mark((function t(){var e,r,a,o,c,i,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:0,r=u.length>1&&void 0!==u[1]?u[1]:0,a=n.getBBox(),o=a.x,c=a.y,i="M"+[o,c]+"L"+[f.x+e,f.y+r],t.next=6,m({pathStr:i});case 6:case"end":return t.stop()}}),t)}))),n.moveAnimateWithScale=function(t){var e=t.dx,a=t.dy,o=t.scale,c=n.transform().local;return new Promise((function(t){r.a.animate(0,1,(function(t){var r="t"+[t*e,t*a],i="s"+(1-(o.from-o.to)/o.from*t);n.transform(c+r+i)}),750,void 0,t)}))},n.hidden=function(){return n.attr({opacity:"0",pointerEvents:"none"})},n.drag((function(t,r){d(n,t,r),e&&(g(!1),d(e,t,r)),u&&u()}),(function(){l(n),e&&(g(!1),l(e)),c&&c()}),(function(){v(n),e&&(g(!0),v(e)),s&&s()})),n}}}]);
//# sourceMappingURL=13.88bd9926.chunk.js.map